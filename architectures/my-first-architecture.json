{
  "$schema": "https://calm.finos.org/release/1.1/meta/calm.json",
  "unique-id": "market-sentiment-service-architecture",
  "name": "Market Sentiment Service Architecture",
  "description": "Minimal architecture describing a market sentiment service that accepts a stock ticker and returns categorical sentiment responses.",
  "metadata": {
    "version": "0.1.0",
    "owner": "Data Science Team"
  },
  "nodes": [
    {
      "unique-id": "market-sentiment-service",
      "node-type": "service",
      "name": "Market Sentiment Service",
      "description": "Given a stock ticker symbol (for example 'AAPL'), returns a categorical sentiment: 'Bullish', 'Bearish', 'Neutral', or 'Mixed'.",
      "interfaces": [
        {
          "unique-id": "sentiment-http-api",
          "url": "https://sentiment.example.internal/api/v1/sentiment"
        }
      ],
      "metadata": {
        "runtime": "python",
        "framework": "fastapi",
        "version": "0.1.0"
      }
    },
    {
      "unique-id": "end-user",
      "node-type": "actor",
      "name": "End User",
      "description": "An end user or customer who queries the Market Sentiment Service with a stock ticker to receive a categorical sentiment response.",
      "metadata": {
        "role": "customer",
        "channel": "web"
      }
    },
    {
      "unique-id": "market-sentiment-db",
      "node-type": "database",
      "name": "Market Sentiment Database",
      "description": "Stores sentiment analysis results and historical ticker data for the Market Sentiment Service.",
      "interfaces": [
        {
          "unique-id": "db-connection",
          "host": "db.internal.local",
          "port": 5432
        }
      ],
      "metadata": {
        "engine": "postgres",
        "version": "15"
      }
    }
    ,
    {
      "unique-id": "market-sentiment-system",
      "node-type": "system",
      "name": "Market Sentiment System",
      "description": "Logical system containing the Market Sentiment Service and its database.",
      "metadata": {
        "owner": "Data Science Team"
      }
    }
  ],
  "relationships": [
    {
      "unique-id": "service-to-db-connection",
      "description": "Market Sentiment Service connects to its primary database for reads and writes.",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "market-sentiment-service",
            "interfaces": ["sentiment-http-api"]
          },
          "destination": {
            "node": "market-sentiment-db",
            "interfaces": ["db-connection"]
          }
        }
      },
      "protocol": "TCP"
    }
    ,
    {
      "unique-id": "end-user-interacts-service",
      "description": "End user interacts with the Market Sentiment Service to request sentiment for a given ticker.",
      "relationship-type": {
        "interacts": {
          "actor": "end-user",
          "nodes": ["market-sentiment-service"]
        }
      }
    }
    ,
    {
      "unique-id": "market-sentiment-system-composition",
      "description": "Market Sentiment System is composed of the service and its database.",
      "relationship-type": {
        "composed-of": {
          "container": "market-sentiment-system",
          "nodes": ["market-sentiment-service", "market-sentiment-db"]
        }
      }
    }
  ]
}
