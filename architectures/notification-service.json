{
  "unique-id": "notification-service",
  "name": "Notification Service",
  "description": "Notification Service",
  "metadata": {
    "owner": "john@architecthub.com",
    "version": "1.0.0",
    "created": "2025-12-30",
    "tags": [
      "notifications",
      "microservices"
    ],
    "runbookUrl": "https://wiki.acme.corp/runbooks/notification-service",
    "monitoringDashboardUrl": "https://datadog.acme.corp/dashboard/notification-service",
    "oncallRotation": {
      "primary": "notifications-team",
      "secondary": "platform-team",
      "scheduleUrl": "https://pagerduty.acme.corp/schedules/notification-service",
      "escalationPolicy": "https://pagerduty.acme.corp/escalation-policies/notifications"
    }
  },
  "controls": {
    "security": {
      "description": "Authentication and authorization requirements for all API access",
      "requirements": [
        {
          "requirement-url": "https://internal-policy.acme.com/security/api-authentication",
          "config": {
            "mechanism": "OAuth2 + JWT",
            "tokenValidation": "Identity Provider",
            "minimumScopes": [
              "notifications.send",
              "notifications.read"
            ],
            "tokenExpiry": "15m"
          }
        },
        {
          "requirement-url": "https://internal-policy.acme.com/security/zero-trust",
          "config": {
            "mutualTLS": true,
            "serviceIdentity": "required",
            "certificateValidation": "strict"
          }
        }
      ]
    },
    "data-protection": {
      "description": "Data encryption and PII handling requirements",
      "requirements": [
        {
          "requirement-url": "https://internal-policy.acme.com/security/encryption-in-transit",
          "config": {
            "minimumTLS": "1.3",
            "cipherSuites": [
              "TLS_AES_256_GCM_SHA384",
              "TLS_CHACHA20_POLY1305_SHA256"
            ]
          }
        },
        {
          "requirement-url": "https://internal-policy.acme.com/compliance/gdpr-pii-handling",
          "config": {
            "dataRetention": "90 days",
            "rightToErasure": true,
            "consentRequired": true
          }
        }
      ]
    },
    "encryption-at-rest": {
      "description": "All persistent data must be encrypted at rest using approved algorithms and key management",
      "requirements": [
        {
          "requirement-url": "https://internal-policy.acme.com/security/encryption-at-rest",
          "config": {
            "algorithm": "AES-256-GCM",
            "keyManagementService": "AWS KMS",
            "keyRotation": "90 days",
            "scope": [
              "databases",
              "message-queues",
              "backups",
              "logs"
            ]
          }
        },
        {
          "requirement-url": "https://internal-policy.acme.com/security/field-level-encryption",
          "config": {
            "piiFields": [
              "emailAddress",
              "phoneNumber",
              "userName"
            ],
            "encryptionAlgorithm": "AES-256-GCM",
            "keyPerRecord": false,
            "keyPerField": true
          }
        }
      ]
    },
    "audit": {
      "description": "Audit logging and security event tracking requirements",
      "requirements": [
        {
          "requirement-url": "https://internal-policy.acme.com/audit/security-events",
          "config": {
            "immutableLogs": true,
            "retention": "7 years",
            "logEvents": [
              "authentication-success",
              "authentication-failure",
              "authorization-failure",
              "data-access"
            ]
          }
        }
      ]
    },
    "pii-audit": {
      "description": "Comprehensive audit logging for all PII access and modifications",
      "requirements": [
        {
          "requirement-url": "https://internal-policy.acme.com/audit/pii-access",
          "config": {
            "logLevel": "detailed",
            "events": [
              "pii-read",
              "pii-write",
              "pii-delete",
              "pii-export",
              "encryption-key-access",
              "failed-access-attempt"
            ],
            "logAttributes": [
              "userId",
              "timestamp",
              "ipAddress",
              "userAgent",
              "fieldNames",
              "operation"
            ],
            "storage": "immutable-append-only",
            "retention": "7-years",
            "alerting": {
              "unusualAccessPatterns": true,
              "bulkExports": true,
              "failedAttempts": 3
            }
          }
        }
      ]
    },
    "data-masking": {
      "description": "Mask PII in logs, error messages, and non-production environments",
      "requirements": [
        {
          "requirement-url": "https://internal-policy.acme.com/security/data-masking",
          "config": {
            "logMasking": {
              "email": "***@***.com",
              "phone": "***-***-1234",
              "fullMask": [
                "ssn",
                "creditCard"
              ]
            },
            "environmentRules": {
              "production": "hash-based-masking",
              "staging": "static-masking",
              "development": "synthetic-data"
            },
            "preserveFormat": true,
            "reversible": false
          }
        }
      ]
    },
    "pii-lifecycle": {
      "description": "Automated PII data retention and deletion policies",
      "requirements": [
        {
          "requirement-url": "https://internal-policy.acme.com/compliance/data-lifecycle",
          "config": {
            "retention": {
              "activeNotifications": "90-days",
              "completedNotifications": "1-year",
              "failedNotifications": "30-days"
            },
            "deletion": {
              "method": "crypto-shredding",
              "verification": "required",
              "softDelete": "30-days",
              "hardDelete": "automated"
            },
            "rightToErasure": {
              "responseTime": "30-days",
              "verificationRequired": true,
              "cascadeDelete": true
            }
          }
        }
      ]
    }
  },
  "flows": [
    {
      "unique-id": "user-registration-welcome-email-flow",
      "name": "User Registration Welcome Email",
      "description": "End-to-end flow for sending welcome email notifications when a new user registers in the system",
      "metadata": {
        "business-impact": "New users don't receive welcome emails - poor onboarding experience",
        "degraded-behavior": "Emails queue in Kafka; delivered when service recovers",
        "customer-communication": "Welcome email will arrive shortly",
        "sla": "99.9% delivery within 30 seconds of registration"
      },
      "transitions": [
        {
          "relationship-unique-id": "api-to-identity-provider",
          "sequence-number": 1,
          "description": "External registration system calls Notification API; API validates authentication token with Identity Provider",
          "direction": "source-to-destination"
        },
        {
          "relationship-unique-id": "api-to-processor",
          "sequence-number": 2,
          "description": "API Gateway routes validated welcome email notification request to Message Processor",
          "direction": "source-to-destination"
        },
        {
          "relationship-unique-id": "processor-to-message-store",
          "sequence-number": 3,
          "description": "Message Processor persists notification record for audit trail and delivery tracking",
          "direction": "source-to-destination"
        },
        {
          "relationship-unique-id": "processor-to-kafka",
          "sequence-number": 4,
          "description": "Message Processor publishes welcome email event to Kafka notification.email topic",
          "direction": "source-to-destination"
        },
        {
          "relationship-unique-id": "kafka-to-email-provider",
          "sequence-number": 5,
          "description": "Email consumer reads event from Kafka and sends welcome email via Email Provider",
          "direction": "source-to-destination"
        },
        {
          "relationship-unique-id": "processor-to-message-store",
          "sequence-number": 6,
          "description": "Email consumer updates delivery status in Message Store after successful send",
          "direction": "source-to-destination"
        }
      ]
    }
  ],
  "nodes": [
    {
      "unique-id": "api-endpoint",
      "node-type": "gateway",
      "name": "API Gateway",
      "description": "API Gateway that receives notification requests from external clients and internal services",
      "costCenter": "CC-3401",
      "owner": "platform-team@acme.com",
      "ownerContact": "platform-oncall@acme.com",
      "environment": "production",
      "dataSensitivity": "internal",
      "metadata": {
        "repository": "https://github.com/acme/notification-gateway",
        "oncallChannel": "#notifications-oncall",
        "deploymentType": "container",
        "platform": "Kubernetes",
        "scaling": {
          "type": "horizontal",
          "minReplicas": 3,
          "maxReplicas": 20,
          "targetCPU": "70%",
          "targetMemory": "80%"
        },
        "healthCheck": {
          "endpoint": "/health",
          "port": 8080,
          "protocol": "HTTP"
        }
      },
      "interfaces": [
        {
          "unique-id": "notification-rest-api",
          "name": "Notification REST API",
          "description": "RESTful API endpoint for submitting notification requests",
          "protocol": "HTTPS",
          "port": 443,
          "path": "/api/v1/notifications"
        }
      ],
      "controls": {
        "authentication": {
          "description": "API Gateway enforces OAuth2 JWT token validation for all incoming requests",
          "requirements": [
            {
              "requirement-url": "https://internal-policy.acme.com/security/api-gateway-auth",
              "config": {
                "provider": "identity-provider",
                "tokenType": "JWT",
                "validationEndpoint": "/oauth/introspect",
                "cacheTokens": true,
                "cacheTTL": 300,
                "requireSecureTransport": true,
                "signatureAlgorithm": "RS256"
              }
            }
          ]
        },
        "authorization": {
          "description": "API Gateway enforces role-based access control and rate limiting",
          "requirements": [
            {
              "requirement-url": "https://internal-policy.acme.com/security/api-authorization",
              "config": {
                "model": "RBAC",
                "rateLimiting": {
                  "perUser": 1000,
                  "perIP": 100,
                  "window": "1m"
                },
                "allowedScopes": [
                  "notifications.send",
                  "notifications.read",
                  "notifications.delete"
                ]
              }
            }
          ]
        },
        "security": {
          "description": "API Gateway security hardening requirements",
          "requirements": [
            {
              "requirement-url": "https://internal-policy.acme.com/security/api-gateway-hardening",
              "config": {
                "wafEnabled": true,
                "ddosProtection": true,
                "corsPolicy": "strict",
                "allowedOrigins": [
                  "https://*.acme.com"
                ]
              }
            }
          ]
        }
      }
    },
    {
      "unique-id": "message-processor",
      "node-type": "service",
      "name": "Message Processor",
      "description": "Core service that processes notification messages, validates content, and routes to appropriate delivery channels",
      "costCenter": "CC-3402",
      "owner": "notifications-team@acme.com",
      "ownerContact": "notifications-oncall@acme.com",
      "environment": "production",
      "dataSensitivity": "confidential",
      "metadata": {
        "repository": "https://github.com/acme/message-processor-service",
        "oncallChannel": "#notifications-oncall",
        "deploymentType": "container",
        "platform": "Kubernetes",
        "scaling": {
          "type": "horizontal",
          "minReplicas": 5,
          "maxReplicas": 30,
          "targetCPU": "65%",
          "targetMemory": "75%"
        },
        "healthCheck": {
          "endpoint": "/actuator/health",
          "port": 8080,
          "protocol": "HTTP"
        }
      },
      "controls": {
        "field-level-encryption": {
          "description": "Application-level encryption for PII fields before storage",
          "requirements": [
            {
              "requirement-url": "https://internal-policy.acme.com/security/field-encryption",
              "config": {
                "algorithm": "AES-256-GCM",
                "keyDerivation": "PBKDF2-SHA256",
                "iterations": 10000,
                "encryptedFields": {
                  "recipient_email": {
                    "deterministic": false,
                    "searchable": false,
                    "indexable": "hashed"
                  },
                  "recipient_phone": {
                    "deterministic": false,
                    "format": "E.164-preserved"
                  },
                  "notification_content": {
                    "deterministic": false,
                    "tokenization": true
                  }
                },
                "keyRotationPolicy": "90-days",
                "keyWrapping": "envelope-encryption"
              }
            }
          ]
        },
        "pii-tokenization": {
          "description": "Replace PII with tokens for non-sensitive operations",
          "requirements": [
            {
              "requirement-url": "https://internal-policy.acme.com/security/tokenization",
              "config": {
                "provider": "HashiCorp Vault",
                "tokenFormat": "format-preserving",
                "fields": [
                  "recipient_email",
                  "recipient_phone"
                ],
                "detokenization": {
                  "requiresAuth": true,
                  "auditLogging": true,
                  "rateLimit": 100
                },
                "tokenTTL": "24h"
              }
            }
          ]
        }
      }
    },
    {
      "unique-id": "message-store",
      "node-type": "database",
      "name": "Message Store",
      "description": "Persistent storage for notification history, delivery status, and audit logs",
      "costCenter": "CC-3402",
      "owner": "notifications-team@acme.com",
      "ownerContact": "notifications-oncall@acme.com",
      "environment": "production",
      "dataSensitivity": "confidential",
      "metadata": {
        "repository": "https://github.com/acme/notification-infrastructure",
        "oncallChannel": "#notifications-oncall",
        "deploymentType": "managed-database",
        "platform": "AWS RDS PostgreSQL",
        "scaling": {
          "type": "vertical",
          "instanceClass": "db.r5.xlarge",
          "storage": "500GB",
          "iops": 3000
        },
        "healthCheck": {
          "endpoint": "tcp",
          "port": 5432,
          "protocol": "TCP"
        }
      },
      "interfaces": [
        {
          "unique-id": "database-connection",
          "name": "Database Connection",
          "description": "PostgreSQL database connection interface for storing notification messages and delivery status",
          "protocol": "JDBC",
          "port": 5432
        }
      ],
      "controls": {
        "encryption-at-rest": {
          "description": "PostgreSQL database encryption for notification history and PII",
          "requirements": [
            {
              "requirement-url": "https://internal-policy.acme.com/security/rds-encryption",
              "config": {
                "transparentDataEncryption": true,
                "kmsKeyArn": "arn:aws:kms:us-east-1:123456789:key/notification-store",
                "storageEncrypted": true,
                "backupEncryption": true,
                "performanceInsights": {
                  "enabled": true,
                  "kmsKeyId": "arn:aws:kms:us-east-1:123456789:key/performance-insights"
                }
              }
            }
          ]
        },
        "encryption-in-transit": {
          "description": "PostgreSQL SSL/TLS requirements for client connections",
          "requirements": [
            {
              "requirement-url": "https://internal-policy.acme.com/security/database-ssl",
              "config": {
                "sslMode": "verify-full",
                "tlsVersion": "1.3",
                "certificateValidation": "required",
                "clientCertificates": false
              }
            }
          ]
        },
        "pii-protection": {
          "description": "Column-level encryption for sensitive notification data",
          "requirements": [
            {
              "requirement-url": "https://internal-policy.acme.com/security/column-encryption",
              "config": {
                "encryptedColumns": [
                  "recipient_email",
                  "recipient_phone",
                  "notification_content",
                  "user_metadata"
                ],
                "encryptionKey": "application-level",
                "searchableEncryption": false
              }
            }
          ]
        },
        "pii-access-control": {
          "description": "Role-based and attribute-based access for PII fields",
          "requirements": [
            {
              "requirement-url": "https://internal-policy.acme.com/security/pii-access",
              "config": {
                "model": "ABAC",
                "policies": {
                  "read-email": {
                    "roles": [
                      "notification-admin",
                      "compliance-officer"
                    ],
                    "requiresMFA": true,
                    "sessionDuration": "15m"
                  },
                  "read-phone": {
                    "roles": [
                      "notification-admin"
                    ],
                    "requiresApproval": true,
                    "approver": "security-team"
                  }
                },
                "breakGlassAccess": {
                  "enabled": true,
                  "requiresIncidentTicket": true,
                  "notifySecurityTeam": true
                }
              }
            }
          ]
        },
        "pii-discovery": {
          "description": "Automated PII field discovery and classification",
          "requirements": [
            {
              "requirement-url": "https://internal-policy.acme.com/security/pii-discovery",
              "config": {
                "scanningEnabled": true,
                "scanFrequency": "weekly",
                "classificationLevels": [
                  "public",
                  "internal",
                  "confidential",
                  "restricted"
                ],
                "piiCategories": {
                  "direct-identifiers": [
                    "email",
                    "phone",
                    "ssn",
                    "passport"
                  ],
                  "quasi-identifiers": [
                    "zipCode",
                    "birthDate",
                    "ipAddress"
                  ],
                  "sensitive-attributes": [
                    "healthInfo",
                    "financialData",
                    "biometrics"
                  ]
                }
              }
            }
          ]
        }
      }
    },
    {
      "unique-id": "email-provider",
      "node-type": "service",
      "name": "Email Provider",
      "description": "Email delivery service that sends notifications via SMTP with template rendering and tracking",
      "costCenter": "CC-3403",
      "owner": "communications-team@acme.com",
      "ownerContact": "comms-oncall@acme.com",
      "environment": "production",
      "dataSensitivity": "internal",
      "metadata": {
        "repository": "https://github.com/acme/email-notification-service",
        "oncallChannel": "#communications-oncall",
        "deploymentType": "container",
        "platform": "Kubernetes",
        "scaling": {
          "type": "horizontal",
          "minReplicas": 2,
          "maxReplicas": 15,
          "targetCPU": "60%"
        },
        "healthCheck": {
          "endpoint": "/health",
          "port": 8080,
          "protocol": "HTTP"
        }
      },
      "interfaces": [
        {
          "unique-id": "email-delivery-api",
          "name": "Email Delivery API",
          "description": "SMTP/API interface for sending email notifications to recipients",
          "protocol": "HTTPS",
          "port": 443,
          "path": "/api/v1/send"
        }
      ]
    },
    {
      "unique-id": "webhook-target",
      "node-type": "service",
      "name": "Web hook",
      "description": "Webhook dispatcher that delivers notifications to registered HTTP endpoints with retry logic",
      "costCenter": "CC-3402",
      "owner": "notifications-team@acme.com",
      "ownerContact": "notifications-oncall@acme.com",
      "environment": "production",
      "dataSensitivity": "internal",
      "metadata": {
        "repository": "https://github.com/acme/webhook-dispatcher",
        "oncallChannel": "#notifications-oncall"
      },
      "interfaces": [
        {
          "unique-id": "webhook-delivery-endpoint",
          "name": "Webhook Delivery Endpoint",
          "description": "HTTP/HTTPS endpoint for receiving webhook notifications from the notification service",
          "protocol": "HTTPS",
          "port": 443,
          "path": "/webhooks/notifications"
        }
      ]
    },
    {
      "unique-id": "identity-provider",
      "node-type": "service",
      "name": "Identity Provider",
      "description": "Authentication and authorization service that validates API requests and issues access tokens",
      "costCenter": "CC-3404",
      "owner": "security-team",
      "ownerContact": "security@acme.corp",
      "environment": "production",
      "dataSensitivity": "confidential",
      "metadata": {
        "repository": "https://github.com/acme/identity-provider",
        "oncallChannel": "#security-oncall",
        "deploymentType": "container",
        "platform": "Kubernetes",
        "scaling": {
          "type": "horizontal",
          "minReplicas": 5,
          "maxReplicas": 25,
          "targetCPU": "75%"
        },
        "healthCheck": {
          "endpoint": "/health",
          "port": 8443,
          "protocol": "HTTPS"
        }
      }
    },
    {
      "unique-id": "kafka-event-bus",
      "node-type": "system",
      "name": "Kafka Event Bus",
      "description": "Distributed event streaming platform that provides reliable async message delivery, retry mechanisms, and event ordering for notification processing",
      "costCenter": "CC-3405",
      "owner": "platform-team",
      "ownerContact": "platform@acme.corp",
      "environment": "production",
      "dataSensitivity": "internal",
      "metadata": {
        "repository": "https://github.com/acme/kafka-cluster",
        "oncallChannel": "#platform-oncall",
        "deploymentType": "statefulset",
        "platform": "Kubernetes",
        "scaling": {
          "type": "cluster",
          "brokers": 5,
          "partitions": 12,
          "replicationFactor": 3
        },
        "healthCheck": {
          "endpoint": "/",
          "port": 9092,
          "protocol": "TCP"
        }
      },
      "interfaces": [
        {
          "unique-id": "kafka-publisher",
          "name": "Kafka Publisher Interface",
          "description": "Interface for publishing notification events to Kafka topics",
          "protocol": "AMQP",
          "port": 9092,
          "metadata": {
            "topics": [
              "notification.email",
              "notification.webhook"
            ]
          }
        },
        {
          "unique-id": "kafka-consumer",
          "name": "Kafka Consumer Interface",
          "description": "Interface for subscribing to and consuming notification events from Kafka topics",
          "protocol": "AMQP",
          "port": 9092,
          "metadata": {
            "consumerGroups": [
              "email-delivery-group",
              "webhook-delivery-group"
            ]
          }
        }
      ],
      "controls": {
        "encryption-at-rest": {
          "description": "Kafka topic and log encryption for event data",
          "requirements": [
            {
              "requirement-url": "https://internal-policy.acme.com/security/kafka-encryption",
              "config": {
                "logEncryption": true,
                "encryptionAlgorithm": "AES-256-GCM",
                "storageClass": "encrypted",
                "kmsKeyArn": "arn:aws:kms:us-east-1:123456789:key/kafka-storage",
                "topicRetention": "7 days"
              }
            }
          ]
        },
        "encryption-in-transit": {
          "description": "Kafka broker and client TLS encryption requirements",
          "requirements": [
            {
              "requirement-url": "https://internal-policy.acme.com/security/kafka-tls",
              "config": {
                "listeners": "SSL://9093",
                "securityProtocol": "SASL_SSL",
                "saslMechanism": "SCRAM-SHA-512",
                "sslProtocol": "TLSv1.3",
                "sslCipherSuites": [
                  "TLS_AES_256_GCM_SHA384"
                ],
                "clientAuth": "required"
              }
            }
          ]
        },
        "access-control": {
          "description": "Kafka ACLs for topic-level authorization",
          "requirements": [
            {
              "requirement-url": "https://internal-policy.acme.com/security/kafka-acls",
              "config": {
                "aclEnabled": true,
                "topics": {
                  "notification.email": {
                    "read": [
                      "email-consumer-group"
                    ],
                    "write": [
                      "message-processor"
                    ]
                  },
                  "notification.webhook": {
                    "read": [
                      "webhook-consumer-group"
                    ],
                    "write": [
                      "message-processor"
                    ]
                  }
                }
              }
            }
          ]
        }
      }
    }
  ],
  "relationships": [
    {
      "unique-id": "api-to-identity-provider",
      "description": "API Gateway authenticates incoming requests by validating tokens with the Identity Provider before allowing access to notification services",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "api-endpoint"
          },
          "destination": {
            "node": "identity-provider"
          }
        }
      },
      "protocol": "HTTPS",
      "encrypted": true,
      "dataClassification": "confidential",
      "sla": "99.99% uptime with <100ms response time for token validation",
      "mode": "synchronous",
      "controls": {
        "authentication": {
          "description": "Token validation protocol and performance requirements",
          "requirements": [
            {
              "requirement-url": "https://internal-policy.acme.com/security/token-validation-protocol",
              "config": {
                "protocol": "OAuth2 RFC 7662 Token Introspection",
                "timeoutMs": 100,
                "retryPolicy": "exponential-backoff",
                "maxRetries": 2,
                "fallbackBehavior": "reject-request"
              }
            }
          ]
        }
      }
    },
    {
      "unique-id": "api-to-processor",
      "description": "API Gateway forwards incoming notification requests with payload metadata to Message Processor",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "api-endpoint"
          },
          "destination": {
            "node": "message-processor"
          }
        }
      },
      "protocol": "HTTPS",
      "encrypted": true,
      "dataClassification": "internal",
      "sla": "99.9% within 200ms",
      "mode": "synchronous"
    },
    {
      "unique-id": "processor-to-message-store",
      "description": "Message Processor persists notification records, delivery status, and audit trail to Message Store",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "message-processor"
          },
          "destination": {
            "node": "message-store"
          }
        }
      },
      "protocol": "JDBC",
      "encrypted": true,
      "dataClassification": "confidential",
      "sla": "99.95% within 100ms",
      "mode": "synchronous",
      "controls": {
        "encryption-in-transit": {
          "description": "PostgreSQL connection encryption requirements",
          "requirements": [
            {
              "requirement-url": "https://internal-policy.acme.com/security/jdbc-ssl",
              "config": {
                "sslMode": "verify-full",
                "sslFactory": "org.postgresql.ssl.DefaultJavaSSLFactory",
                "connectionTimeout": 5000,
                "sslRootCert": "/etc/ssl/certs/rds-ca-2024-bundle.pem"
              }
            }
          ]
        }
      }
    },
    {
      "unique-id": "processor-to-kafka",
      "description": "Message Processor publishes notification events to Kafka topics for reliable async processing and delivery",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "message-processor"
          },
          "destination": {
            "node": "kafka-event-bus"
          }
        }
      },
      "protocol": "AMQP",
      "encrypted": true,
      "dataClassification": "internal",
      "sla": "99.95% uptime with guaranteed message delivery and ordering",
      "mode": "asynchronous",
      "controls": {
        "encryption-in-transit": {
          "description": "Kafka TLS encryption for producer connections",
          "requirements": [
            {
              "requirement-url": "https://internal-policy.acme.com/security/kafka-producer-tls",
              "config": {
                "securityProtocol": "SASL_SSL",
                "saslMechanism": "SCRAM-SHA-512",
                "sslTruststoreLocation": "/etc/kafka/ssl/truststore.jks",
                "sslKeystoreLocation": "/etc/kafka/ssl/keystore.jks",
                "sslEndpointIdentificationAlgorithm": "https"
              }
            }
          ]
        }
      }
    },
    {
      "unique-id": "kafka-to-email-provider",
      "description": "Kafka consumers read email notification events and forward them to the Email Provider with automatic retry on failures",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "kafka-event-bus"
          },
          "destination": {
            "node": "email-provider"
          }
        }
      },
      "protocol": "HTTPS",
      "encrypted": true,
      "dataClassification": "internal",
      "sla": "best-effort, retry 3 times",
      "mode": "asynchronous",
      "controls": {
        "encryption-in-transit": {
          "description": "Kafka TLS encryption for consumer connections",
          "requirements": [
            {
              "requirement-url": "https://internal-policy.acme.com/security/kafka-consumer-tls",
              "config": {
                "securityProtocol": "SASL_SSL",
                "saslMechanism": "SCRAM-SHA-512",
                "sslTruststoreLocation": "/etc/kafka/ssl/truststore.jks",
                "sslKeystoreLocation": "/etc/kafka/ssl/keystore.jks",
                "sslEndpointIdentificationAlgorithm": "https"
              }
            }
          ]
        }
      }
    },
    {
      "unique-id": "kafka-to-webhook-target",
      "description": "Kafka consumers read webhook notification events and deliver them to external webhook targets with exponential backoff retry strategy",
      "relationship-type": {
        "connects": {
          "source": {
            "node": "kafka-event-bus"
          },
          "destination": {
            "node": "webhook-target"
          }
        }
      },
      "protocol": "HTTPS",
      "encrypted": true,
      "dataClassification": "internal",
      "sla": "best-effort, retry with exponential backoff",
      "mode": "asynchronous"
    }
  ],
  "$schema": "https://example.com/patterns/notification-service-pattern.json"
}