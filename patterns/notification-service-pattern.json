{
  "$id": "https://example.com/patterns/notification-service-pattern.json",
  "title": "Notification Service Pattern",
  "description": "Pattern for a Notification Service that receives alerts and routes them to storage, email, and webhooks.",
  "type": "object",
  "properties": {
    "nodes": {
      "type": "array",
      "prefixItems": [
        {
          "type": "object",
          "properties": {
            "unique-id": { "const": "api-endpoint" },
            "node-type": { "const": "gateway" },
            "name": { "const": "API Gateway" }
          },
          "required": ["unique-id", "node-type", "name"],
          "additionalProperties": true
        },
        {
          "type": "object",
          "properties": {
            "unique-id": { "const": "message-processor" },
            "node-type": { "const": "service" },
            "name": { "const": "Message Processor" }
          },
          "required": ["unique-id", "node-type", "name"],
          "additionalProperties": true
        },
        {
          "type": "object",
          "properties": {
            "unique-id": { "const": "message-store" },
            "node-type": { "const": "database" },
            "name": { "const": "Message Store" }
          },
          "required": ["unique-id", "node-type", "name"],
          "additionalProperties": true
        },
        {
          "type": "object",
          "properties": {
            "unique-id": { "const": "email-provider" },
            "node-type": { "const": "service" },
            "name": { "const": "Email Provider" }
          },
          "required": ["unique-id", "node-type", "name"],
          "additionalProperties": true
        },
        {
          "type": "object",
          "properties": {
            "unique-id": { "const": "webhook-target" },
            "node-type": { "const": "service" },
            "name": { "const": "Web hook" }
          },
          "required": ["unique-id", "node-type", "name"],
          "additionalProperties": true
        }
      ],
      "minItems": 5,
      "maxItems": 5
    },
    "relationships": {
      "type": "array",
      "prefixItems": [
        {
          "type": "object",
          "properties": {
            "unique-id": { "const": "api-to-processor" },
            "source": { "const": "api-endpoint" },
            "target": { "const": "message-processor" }
          },
          "required": ["unique-id", "source", "target"],
          "additionalProperties": true
        },
        {
          "type": "object",
          "properties": {
            "unique-id": { "const": "processor-to-message-store" },
            "source": { "const": "message-processor" },
            "target": { "const": "message-store" }
          },
          "required": ["unique-id", "source", "target"],
          "additionalProperties": true
        },
        {
          "type": "object",
          "properties": {
            "unique-id": { "const": "processor-to-email-provider" },
            "source": { "const": "message-processor" },
            "target": { "const": "email-provider" }
          },
          "required": ["unique-id", "source", "target"],
          "additionalProperties": true
        },
        {
          "type": "object",
          "properties": {
            "unique-id": { "const": "processor-to-webhook-provider" },
            "source": { "const": "message-processor" },
            "target": { "const": "webhook-target" }
          },
          "required": ["unique-id", "source", "target"],
          "additionalProperties": true
        }
      ],
      "minItems": 4,
      "maxItems": 4
    }
  },
  "required": ["nodes", "relationships"]
}
